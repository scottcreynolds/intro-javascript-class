<!doctype html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>reveal.js</title>

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/black.css">

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <!--    intro-->
      <section class="center">
        <h2>Introduction to JavaScript</h2>
        <h4>Day 2: JavaScript Data, AJAX, and APIS</h4>
      </section>
      <section>
        <h2>Questions from Yesterday?</h2>
      </section>
      <section>
        <h2>Today's Agenda</h2>
        <small>
        <ul>
          <li class="fragment">Pimp Your Editor</li>
          <li class="fragment">Review Objects</li>
          <li class="fragment">Learn Debugging Techniques</li>
          <li class="fragment">Manipulate the DOM</li>
          <li class="fragment">Learn about callback functions and asynchronous JavaScript</li>
          <li class="fragment">Learn what APIs are and how to use them with JavaScript</li>
          <li class="fragment">Learn what AJAX is and how to use it to interact with APIs</li>
          <li class="fragment">Learn different methods for authenticating to an API with JavaScript</li>
        </ul>
        </small>
      </section>
      <section>
        <h2>New Tools</h2>
        <ul>
          <li>Sublime Packages</li>
          <li>Postman</li>
          <li>JSONView (Chrome/Firefox Extension)</li>
        </ul>
      </section>
      <section>
        <h2>Tweaking Sublime</h2>
        <ul>
          <li class="fragment">Package Control - https://packagecontrol.io/installation</li>
          <li class="fragment">Tour of Command Pallete/Finder</li>
          <li class="fragment">snippets</li>
          <li class="fragment">Sidebar Enhancements</li>
          <li class="fragment">BracketHighlighter</li>
          <li class="fragment">View in Browser (edit settings)</li>
          <li class="fragment">jQuery</li>
        </ul>
      </section>
      <section>
        <h2></h2>
      </section>
      <section>
        <h4>Objects vs Arrays Quiz</h4>
        <ul>
          <li class="fragment">If you want to store a number of data elements in order, which do you use?</li>
          <li class="fragment">True/False: All elements in an array must be the same type.</li>
          <li class="fragment">What data type are all object keys?</li>
          <li class="fragment">True/False: You must define all of an object's properties when you create it.</li>
          <li class="fragment">If you had an object that represented a director, how would you store that director's movies?</li>
          <li class="fragment">How would you store a bunch of director objects?</li>
        </ul>
      </section>
      <section>
        <h2>Errors &amp; Debugging</h2>
        <ul>
          <li class="fragment">Setting breakpoints</li>
          <li class="fragment"><code>debugger</code> statement</li>
          <li class="fragment">Watching variables</li>
          <li class="fragment">Logging (<code>console.log(); console.warn(); console.error();</code>)</li>
        </ul>
      </section>
      <section>
        <h2>Throwing and Catching Exceptions</h2>
        <pre class="fragment"><code>try {
  //something that might explode
  throw new Error('welp');
}
catch(e) {
  //handle the error
}
finally {
  //optionally clean up
}</code></pre>
<aside class="notes">try/finally for transactions, or opening a file resource and making sure it's closed, etc;
      </section>
      <section>
        <h2>Linting</h2>
        <ul>
        <li>Linting is the practice of evaluating code for syntax, usage, and even style. There are linters for almost every language.</li>
        <li>You can use http://jshint.com/ online, or use a linter within your editor.</li>
        <li>Linting is great for preventing the most common bugs in interpreted languages - syntax issues</li>
        </ul>
      </section>
      <!--                JavaScript on the Web-->
      <section>
        <h2>JavaScript on the Web</h2>
        <p>JavaScript is still primarily used to manipulate web pages. It's often thought of as a "front-end" or "client-side" technology, though, with Node, it's a legitimate server-side language as well.</p>
      </section>
      <section>
        <h4>HTML/CSS Review</h4>
        <pre><code>&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;A VERY simple page&lt;/title&gt;
  &lt;style&gt;
    .someStyle {
      background-color: blue;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="uniqueId"&gt;I'm the Inner Text of Div uniqueid&lt;/div&gt;
  &lt;div class="someStyle"&gt;This is all Inner HTML of Body
    &lt;a href="#"&gt;Link That Goes Nowhere!&lt;/a&gt;&lt;/div&gt;
  &lt;!-- "class" and "id" are ATTRIBUTES of their elements --&gt;
  &lt;!-- when possible load scripts at end of body
  so they don't block page rendering --&gt;
  &lt;script src="class.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
      </section>
      <section>
        <h2>The DOM</h2>
        <ul>
          <li class="presentation">DOM - Document Object Model</li>
          <li class="presentation">Browser exposes <em>objects</em> that represent the HTML structure of the page.</li>
          <li class="presentation">Document -> Node -> Properties</li>
          <li class="presentation">Common Node Properties: parentNode, childNodes, prevSibling, nextSibling</li>
          <li class="presentation">In Chrome/Firefox - Open Page -> Right Click -> Inspect Element</li>
        </ul>
      </section>
      <section>
        <h2>Navigating the DOM</h2>
        <pre><code>
        console.log(document.body);
        console.log(document.body.parentNode);
        console.log(document);

        for (var i = 0; i&lt;document.body.childNodes.length; i++) {
          console.log(document.body.childNodes[i]);
        }
        </code></pre>
      </section>
      <section>
        <h2>Selectors</h2>
        <pre><code><div id="findMe">Hi</div>
<div class="nav">Div 1</div>
<div class="nav">Div 2</div></code></pre>
        <pre><code>var div = document.getElementById('findMe');
var divs = document.getElementsByTagName('div');
var navs = document.getElementsByClassName('nav');

for(let i=0;i&lt;navs.length;i++){
  console.log(navs[i]);
}</code></pre>
      </section>
      <section>
        <h2>Events</h2>
        <ul>
        <li>Most DOM elements have ways to let us know when a user has taken an action. These are called <em>events.</em></li>
        <li>Common events are: <code>click</code>, <code>dblclick</code>, <code>mouseover</code>,<code> mouseout</code>, <code>focus</code>, and <code>blur</code></li>
        <li>A function that responds to an event is called an <em>event listener (or handler)</em>.</li>
        <li>See MDN for more.</li>
        </ul>
      </section>
      <section>
        <h2>Event Listeners</h2>
        <pre><code>&lt;div id="findMe" onmouseover="changeDiv()"&gt;Hi&lt;/div&gt;</code></pre>
        <pre><code>//class.js
function changeDiv() {
  var el = document.getElementById('findMe');
  el.innerText = "Moused Over";
}</code></pre>
        <pre class="fragment"><code>&lt;div id="findMe" onmouseover="alert('hi');"&gt;Hi&lt;/div&gt;
//the value on the event is legit JS code but generally don't.
        </code></pre>
      </section>
      <section>
        <h2>Unobtrusive Event Listeners</h2>
        <pre><code>&lt;div class="nav" click="changeNav();"&gt;Div 1&lt;/div&gt;
&lt;div class="nav" click="changeNav();"&gt;Div 2&lt;/div&gt;</code></pre>
        <pre><code>function changeNav() {
  var idk = document.....????
}</code></pre>
        <pre><code>&lt;div class="nav"&gt;Div 1&lt;/div&gt;
&lt;div class="nav"&gt;Div 2&lt;/div&gt;</code></pre>
        <pre><code>//put code where it belongs
var navs = document.getElementsByClassName('nav');
for(var i=0; i&lt;navs.length;i++) {
  navs[i].addEventListener('click', function() {
    alert(this.innerText);
  })
}</code></pre>
      <aside class="notes">anon function. this still kinda sucks but we'll get there. move script tag to top of file???</aside>
      </section>
      <section>
        <h2>jQuery</h2>
        <ul>
          <li class="fragment">Library providing functions that simplify working with the DOM and AJAX.</li>
          <li class="fragment">"Write less, do more"</li>
          <li class="fragment">The most popular JavaScript library (20 million sites)</li>
          <li class="fragment">Probably the closest we ever got to full cross-browser standardization.</li>
        </ul>
      </section>
      <section>
        <h2>Including jQuery</h2>
        <p>You can download jQuery locally and include it, which is recommended for real projects. For this, you can get a link to a CDN-hosted jQuery and use that. Go to https://code.jquery.com</p>
        <pre><code>&lt;script src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"&gt;&lt;/script&gt;
// don't forget to include jQuery ABOVE any other
// code that needs it!</code></pre>
      <aside class="notes">downloading protects you from changes/outages</aside>
      </section>
      <section>
        <h2>Easier DOM Manipulation</h2>
        <pre><code>&lt;div id="somediv"&gt;&lt;/div&gt;
&lt;div class="nav"&gt;&lt;/div&gt;</code></pre>
        <pre class="fragment"><code>let oldAndBusted = document.getElementById("somediv");
let newHotness = $('#somediv'); // # = id
let navDivs = $('.nav'); // . = class</code></pre>
        <pre class="fragment"><code>var div = $('#somediv');
let innerHTML = div.html();
div.html('&lt;p&gt;HTML YAY&lt;/p&gt;');
// var p = document.createElement('p');
// document.body.appendChild(p);
$('body').append('&lt;p&gt;');</code></pre>
        <pre class="fragment"><code>div.css('width'); //read
div.css('width', '200px'); //write
div.attr('id'); //read
// how to write id?</code></pre>
      </section>
      <section>
        <h2>Document Ready</h2>
        <p>So far, we've just been relying on our simple DOM to be loaded fast enough, but more complicated pages take time to render. We need a way to ensure the page has finished loading before we try to do something, like, attach event listeners.</p>
        <pre><code>$(document).ready(function() {
  //put any page init code here
  // like event handlers
});

$(function() {
  //shorthand version, same thing
})</code></pre>
      </section>
      <section>
        <h2>Events in jQuery</h2>
        <pre><code>&lt;a href="#" id="link" class="clickable"&gt;Click Me&lt;/a&gt;
&lt;a href="#" id="link2" class="clickable"&gt;Click Me 2&lt;/a&gt;</code></pre>
        <pre class="fragment"><code>$(function() {
  $('#link').on('click', function() {
    // $(this) = jQuery element that triggered event
    alert($(this).text());
  })
});</code></pre>
      <pre class="fragment"><code>$('.clickable').on('click', function() {
  alert($(this).text()); //no more loop
});</code></pre>
      </section>
      <section>
        <h2>Forms</h2>
        <p>HTML forms allow us to capture structured data</p>
        <pre class="fragment"><code>&lt;form id="about"&gt;
  &lt;input type="text" id="name" placeholder="Enter Your Name"/&gt;
  &lt;label&gt;Favorite Dinosaur&lt;/label&gt;
  &lt;select id="dinosaur"&gt;
    &lt;option value="velociraptor"&gt;Velociraptor&lt;/option&gt;
    &lt;option value="somewronganswer"&gt;Some Wrong Answer&lt;/option&gt;
  &lt;/select&gt;
  &lt;input type="text" id="dinoName"/&gt;
  &lt;input type="submit" value="Go!"/&gt;
&lt;/form&gt;</code></pre>
      <pre class="fragment"><code>$(function(){
  $('#about').submit(function(event)
    var name = $('#name').val(); //get value from form
    var dino = $('#dinosaur').val();
    $('#dinoName').val(name = " the " + dino); // set val
    return false; // prevent form from trying to "submit"
  });
})</code></pre>
      </section>
      <section>
        <h2>DOM Lab</h2>
        <p>We're going to create a library inventory system!</p>
        <ul>
          <li>Create a form to add books to our library. It should have fields for book title and author at minumum.</li>
          <li>On submit, add to the "library" - append to a list of books and titles on the page.</li>
        </ul>
      </section>
      <section>
        <h2>Review Quiz</h2>
        <ul>
          <li class="fragment">What data type would you use to hold a list of items in order?</li>
          <li class="fragment">What is the literal constructor for an object?</li>
          <li class="fragment">Which loop always executes at least once?</li>
          <li class="fragment">Which loop would you use to act on every member of a collection?</li>
          <li class="fragment">What library provides common, cross-browser functions for manipulating the DOM?</li>
        </ul>
      </section>
      <section>
        <h2>Quiz, Continued</h2>
        <ul>
          <li class="fragment">When using jQuery selectors, how do you specify that you are looking for an id? A css class?</li>
          <li class="fragment">How would you turn a comma-separated string into an array?</li>
          <li class="fragment">What function do you use to wait for the DOM to fully load before executing?</li>
          <li class="fragment">What is type coercion?</li>
          <li class="fragment">Why do we use triple-equals?</li>
        </ul>
      </section>
      <section>
        <h2>Functions Review</h2>
        <pre class="fragment"><code>function say(x) {
  console.log(x);
}</code></pre>
        <ul>
          <li class="fragment">Functions are data.</li>
          <li class="fragment">Functions are portable.</li>
        </ul>
          <pre class="fragment"><code>let func = function(x) {
  console.log(x);
}
func("hi");</code></pre>
      <aside class="notes">say vs say()</aside>
      </section>
      <section>
        <h2>Functions as Arguments</h2>
        <pre class="fragment"><code>let add = function(x,y) {
  return x+y;
}
let subtract = function(x,y) {
  return x-y;
}
let doMath = function(x,y,mathFunction) {
  return mathFunction(x,y);
}
doMath(3,2,add);
doMath(3,2,subtract);</code></pre>
      </section>
      <section>
        <h2>Callback Functions</h2>
        <p>Callback Functions are used to provide a way for an active function to pass its results to another function, often after a long-running or asynchronous operation.</p>
        <pre class="fragment"><code>let finished = function(data) {
    console.log(data);
}
let startOperation = function(done) {
    for(var i=0;i&lt;100000;i++) {
        //dosomething
    }
    done(i);
}
startOperation(finished);</code></pre>
      </section>
      <section>
        <h4>You've Seen Callback Functions Before</h4>
        <pre class="fragment"><code>$('#elem').on('click', function() {
  //this anonymous function is a callback
})
$(document).ready(function() {
  //as is this
})
</code></pre>
      <pre class="fragment"><code>function clickHandler() {
  //do the event handling here
}
$('#elem').on('click', clickHandler);</code></pre>
      </section>
      <section>
        <h2>Asynchronous Operations</h2>
        <p>Asynchronous code allows you to "kick off" an operation and then let the program continue without waiting for that operation to complete. Some uses for asynchronous code:</p>
        <ul>
          <li class="fragment">Long-running operations like reading or generating big data sets.</li>
          <li class="fragment">Operations that cross system boundaries or require external resources.</li>
          <li class="fragment">Operations that don't need to complete before the user moves on to other tasks.</li>
        </ul>
      </section>
      <section>
        <h4>setTimeout()</h4>
        <p>The setTimeout() function sets a timer that executes the specified callback function after the timer expires.</p>
        <pre class="fragment"><code>var timeoutID;
function slowAlert() {
  alert('That was really slow!');
}

function clearAlert() {
  //cancels the timer
  window.clearTimeout(timeoutID);
}

// hold a reference to the timer if we need to cancel
timeoutID = window.setTimeout(slowAlert, 2000);
// with anon func instead of callback
window.setTimeout(function() {
    alert('That was really slow!');
}, 2000);
</code></pre>
      <aside class="notes">more readable with callbacks</aside>
      </section>
      <section>
        <h4>setInterval()</h4>
        <p>The setInterval() function repeatedly calls a function with a fixed time delay between each call.</p>
        <pre class="fragment"><code>&lt;div id='box'&gt;Hello&lt;/div&gt;

var intervalId;
function changeColor() {
  intervalId = setInterval(flashText, 1000);
}

function flashText() {
  var box = document.getElementById('box');
  //what operator?
  box.style.color = box.style.color == 'red' ? 'blue' : 'red';
}

function stopTextColor() {
  clearInterval(intervalId);
}</code></pre>
      </section>
      <section>
        <h2>Async Lab</h2>
        <small><p>Let's make a whammy game!</p>
        <ul>
          <li>Make an HTML page with a Start and Stop button. Create an array of prize amounts and "whammies" (e.g. [100, 200, 300, 400, 500, "Whammy!"])</li>
          <li>When the player clicks Start, kick off a function to randomly generate a number that's a valid index in your array (i.e. if your array has 10 items, a number between 0 and 9). Live-update the page with the current prize amount.</li>
          <li>When the player clicks Stop, cancel the game timer and show them what they've won! Or lost!</li>
          <li>Keep a running total of the score that gets wiped out if you land on Whammy.</li>
        </ul></small>
        <aside class="notes">The faster it goes, the harder it is!</aside>
      </section>
      <section>
        <h2>Intro to APIs</h2>
        <p>An application programming interface (API) is a fa√ßade providing simplified access to more complex code. We've already seen a bunch of APIs in action.</p>
        <ul>
          <li class="fragment">The <code>console</code> object is an API wrapping complicated browser functions.</li>
          <li class="fragment">The DOM libraries in JavaScript and jQuery.</li>
          <li class="fragment">Technically, any set of functions you make that abstract logic from the caller constitutes an API.</li>
        </ul>
      </section>
      <section>
        <h2>Why Build APIs?</h2>
        <ul>
          <li class="fragment">Separate Concerns for architecture and scale reasons (front-end/back-end, system boundaries, etc).</li>
          <li class="fragment">Reuse across clients (iOS, Android, Web -> same back end)</li>
          <li class="fragment">Abstract complex logic/data, and control access.</li>
        </ul>
        <aside class="notes">SoC - Twitter scale.</aside>
      </section>
      <section>
        <h2>Web APIs</h2>
        <small><p>Many web appliations provide APIs to subsets of their data and functionality, allowing developers the freedom to create new applications by combining available data. For some, it's their whole business model.</p>
        <ul>
          <li class="fragment">Social APIs: Twitter, Facebook, Foursquare, Meetup, YouTube, Spotify.</li>
          <li class="fragment">Utility APIs: Github, Google Maps, Twilio, Stripe, Mailchimp, Slack, Spark, Outlook.</li>
          <li class="fragment">Authentication APIs: Google, Facebook, Twitter, Amazon, Tumblr, a forever amount more.</li>
        </ul>
        </small>
      </section>
      <section>
        <h2>Some Interesting APIs</h2>
        <ul>
          <li class="fragment">Twinword Sentiment Analysis: <br/> <small>https://www.twinword.com/api/sentiment-analysis.php</small></li>
          <li class="fragment">Star Wars API: <br/><small>http://swapi.co/api/</small></li>
          <li class="fragment">Meme API: <br/><small>http://apimeme.com/meme?meme=Chemistry+Cat&amp;top=Eat+bananas+for+potassium%3F&amp;bottom=K</small></li>
        </ul>
      </section>
      <section>
        <h2>HTTP Verbs</h2>
        <ul>
          <li class="fragment">GET - retrieve resource data</li>
          <li class="fragment">POST - create new resource</li>
          <li class="fragment">PUT - Update/Replace resource</li>
          <li class="fragment">PATCH - Update/Modify resource</li>
          <li class="fragment">DELETE - Delete resource</li>
          <li class="fragment">GET/POST are what you will deal with most often when consuming APIs</li>
        </ul>
      </section>
      <section>
        <h2>REST</h2>
        <small>
        <ul>
          <li class="fragment">Representational State Transfer</li>
          <li class="fragment">Using a predictable resource-focused URI to communicate with the server.</li>
          <li class="fragment"><code>https://api.site.com/resource/action/filter</code></li>
          <li class="fragment">Resource: noun that represents a system object (e.g. user)</li>
          <li class="fragment">Action: what to do to the resource (retrieve/create/update)</li>
          <li class="fragment">Filter: any sort of query/filter on the data (e.g. id)</li>
          <li class="fragment">Most API endpoints are a combination of a VERB + URI. GET /users = retrieve all users. POST /users = create new user (why /users?)</li>
        </ul>
        </small>
        <aside class="notes">/users is the resource
        look at the routes for swapi again, then look at params for memegen</aside>
      </section>
      <section>
        <h2>Reading API Docs</h2>
        <ul>
          <li class="fragment">https://developer.github.com/v3/</li>
          <li class="fragment">https://developer.spotify.com/web-api/</li>
          <li class="fragment">https://developer.foursquare.com/docs/</li>
        </ul>
      </section>
      <section>
        <h2>JSON</h2>
        <ul>
          <li class="fragment">JavaScript Object Notation</li>
          <li class="fragment"><small>Say it like it's a human name not a robot name (Jason, not Jay-Son)</small></li>
          <li class="fragment">Plain Ol' Javascript Objects, mostly. Data only, no behavior.</li>
          <li class="fragment">Uses JavaScript syntax, but is not necessarily "JavaScript". It's a <em>serialized</em> string.</li>
          <li class="fragment">Modern format for API data/communication. Has <em>largely</em> replaced XML as the standard.</li>
        </ul>
      </section>
      <section>
        <h2>JSON Structure</h2>
        <pre><code>{
  "star": "Sun",
  "planets": [
    {
      "name": "Mercury",
      "position": 1,
      "age": 4503000000
    },
    {
      "name": "Earth",
      "position": 3,
      "age": 4543000000,
      "satellites": [
        {
          "name": "Moon"
        }
      ]
    }
  ]
}</code></pre>
      </section>
      <section>
        <h2>Reading JSON</h2>
        <pre><small><code>//from string
var planet = '{"name":"Jupiter","rings":true,"moons":["Europa","Ganymede","Io","Callisto"]}';
planet.name; // nope
var j = JSON.parse(planet);
j.name; // "Jupiter"
j.moons;</code></small></pre>
      <pre><small><code>var nested = '{"name": "Tom", "kids":[{"name": "Sally"},{"name": "Tina"}]'
var tom = JSON.parse(nested);
tom.kids[0].name;
tom["kids"][0]["name"];
tom.kids.length; </code></small></pre>
      </section>
      <section>
        <h2>Writing JSON</h2>
        <pre><code>var obj = {name: "Jupiter", moons: ["Europa", "Io"]};
var json = JSON.stringify(obj);
console.log(json);
console.log(obj);

obj.sayMoons = function() {
  for(let i=0;i&lt;this.moons.length;i++) {
    console.log(this.moons[i]);
  }
}
obj.sayMoons();
json = JSON.stringify(obj);
console.log(json); //no methods</code></pre>
      </section>
      <section>
        <h2>Parsing XML</h2>
        <p><small>You may find yourself needing to interact with XML from time to time. It's less fun than JSON, but XML has a DOM just like an HTML web page (in fact, HTML is a specialized XML).</small></p>
        <pre class="fragment"><code>var text = "<bookstore><book>" +
"<title>Everyday Italian</title>" +
"<author>Giada De Laurentiis</author>" +
"<year>2005</year>" +
"</book></bookstore>";

var parser = new DOMParser();
var xmlDoc = parser.parseFromString(text,"text/xml");
console.log(xmlDoc.getElementsByTagName('title')[0].innerHTML)</code></pre>
      </section>
      <section>
        <h2>JSON Parsing Lab</h2>
        <p>Use the Star Wars API (http://swapi.co/api/) to practice parsing JSON. We will build on these functions in a future exercise! Each function should take a string argument for the JSON input.</p>
        <small><ul>
          <li>Create a function to parse the JSON from the Films endpoint (http://swapi.co/api/films/) for a single film and log the values for the title, opening crawl, characters, and planets to the console.</li>
          <li>Create a function to parse the JSON from the People endpoint for a specific character and output the name to the console.</li>
          <li>Create a function to parse the JSON from the Planets endpoint for a given planet, outputting the name and terrain.</li>
        </ul></small>
      </section>
      <section>
        <h2>AJAX</h2>
        <ul>
          <li class="fragment">Asynchronous JavaScript and XML.</li>
          <li class="fragment"><small>But not really XML that much anymore.</small></li>
          <li class="fragment">Communicate to server/API without blocking the client.</li>
          <li class="fragment">Allows interactivity and client updates without full refreshes/stopping user action.</li>
          <li class="fragment">Consider a fully synchronous Twitter. Nightmare!!</li>
        </ul>
        <aside class="notes">open twitter, watch network tab, watch notifications</aside>
      </section>

      <section>
        <h2>jQuery AJAX</h2>
        <p>jQuery provides very easy ways to do AJAX with a common interface.</p>
        <pre class="fragment"><code>var uri = 'https://api.github.com/users/octocat/repos'
$.get(uri, function(data) {
  //what kind of function are we in?
  console.log(data);
})
//what if there's an error? or a lot of code?
//what about Separation of Concerns/Single Responibility Principle?</code></pre>
      </section>
      <section>
        <h2>jQuery AJAX Handlers</h2>
        <pre class="fragment"><code>var uri = 'https://api.github.com/users/octocat/repos'
$.get(uri)
  .done(function(data) {
    console.log(data);
    console.log("success!");
  })
  .fail(function(err) {
    console.log(err);
    console.log('oops!');
  })</code></pre>
  <aside class="notes">explain method chaining</aside>
      </section>
      <section>
        <h2>Even More jQuery AJAX</h2>
        <p><small>jQuery.get() is a <em>wrapper</em> for jQuery.ajax(), simplifying the call. But if you need more control, you can call <code>$.ajax()</code> directly.</small></p>
        <pre class="fragment"><code>$.ajax({
  method: "POST",
  url: "some.php",
  dataType: "xml", // how the "data" param knows what it is
  headers: {"Custom-Header": 'header-value'},
  data: { name: "John", location: "Boston" }
})
  .done(function( msg ) {
    alert( "Data Saved: " + msg );
  });</code></pre>
      </section>
      <section>
        <h2>jQuery AJAX Exercise</h2>
        <p>Set up an HTML page that uses jQuery to interact with the Github API</p>
        <ul>
          <li>List all public repositories for user octocat in an HTML list element on the page.</li>
          <li>List the first five commits for each repository within a sub-list.</li>
        </ul>
      </section>
      <section>
        <h2>Data Attributes</h2>
        <p><small>When building dynamic HTML elements, we sometimes need to store useful bits of data so that we can retrieve them with JavaScript. For instance, in our last exercise, we might want easy access to the user id of a repository owner that we can access without parsing the text of the element.</small></p>
        <pre class="fragment"><code>//not super easy to access the data
&lt;li&gt;User Name: octocat&lt;/li&gt;

//not semantically accurate and fails if more than one
//repo from octocat
&lt;li id="octocat"&gt;User Name: octocat&lt;/li&gt;

//here we go
&lt;li data-user="octocat"&gt;User Name: octocat&lt;/li&gt;</code></pre>
      </section>
      <section>
        <h2>Using Data Attributes</h2>
        <pre class="fragment"><code>&lt;li class="user" data-user="octocat"&gt;User Name: octocat&lt;/li&gt;

//what is this function?
$(function() {
  $('.user').on('click', function() {
    var id = $(this).data("user");
    $.get('https://github/repos/' + id, function(data) {
      //do something
    })
  })
})

//plain javascript
el = document.getElementsByClassName('user')[0]
el.dataset.user</code></pre>
      </section>
      <section>
        <h2>Handlebars</h2>
        <p>Building HTML by hand sucks. Template engines give us a way to dynamically create HTML without having to always do it by hand.</p>
        <pre class="fragment"><code><main id="main">
  <a href="#" onclick="loadIssues();">Load Github Issue</a>
</main>
&lt;script id="issue-template" type="text/x-handlebars-template"&gt;
  &lt;article&gt;
    &lt;header&gt;&lt;h3&gt;Issue #{{number}} ({{state}})&lt;/h3&gt;&lt;/header&gt;
    &lt;p&gt;{{body}}&lt;/p&gt;
    &lt;footer&gt;&lt;a href="{{url}}"&gt;created {{created_at}}&lt;/a&gt;&lt;/footer&gt;
  &lt;/article&gt;
&lt;/script&gt;</code></pre>
        <aside class="notes">handlebarsjs.com</aside>
      </section>
      <section>
        <h2>Handlebars</h2>
        <pre><code>function loadIssue() {
  var issue = {
    state: "closed",
    number: 5,
    created_at: "2017-03-31 16:23:13 UTC",
    body: "Instructions say GET but it's a POST"
  }

  var template = Handlebars.compile(document.getElementById("issue-template").innerHTML);
  var result = template(issue);
  document.getElementsByTagName("main")[0].innerHTML += result;
}</code></pre>
      <aside class="notes">fake our own data to test before calling api. wire it up and go!</aside>
      </section>
      <section>
        <h2>Handlebars Helpers</h2>
        <h4>{{each}}</h4>
        <pre class="fragment"><code><script id="issue-template" type="text/x-handlebars-template">
  {{#each this}}
  <article>
    <header><h3>Issue #{{number}} ({{state}})</h3></header>
    <p>{{body}}</p>
    <footer><a href="{{url}}">created {{created_at}}</a></footer>
  </article>
  {{/each}}
</script></code></pre>
      <pre class="fragment"><code>function loadIssues() {
  var template = Handlebars.compile(document.getElementById("issue-template").innerHTML);
  var result = template(issues);
  document.getElementsByTagName("main")[0].innerHTML += result;
}</code></pre>
      <aside class="notes">block-level helper. need # and / to mark start and end like braces or tags</aside>
      </section>
      <section>
        <h2>Handlebars Helpers</h2>
        <h4>{{if}}</h4>
        <pre class="fragment"><code><script id="issue-template" type="text/x-handlebars-template">
  {{#each this}}
  <article>
    <header><h3>Issue #{{number}} ({{state}})</h3></header>
    <p>{{body}}</p>
    {{#if comments_count}}
    <p>{{comments_count}} Comments</p>
    {{else}}
    <p>No Comments Yet</p>
    {{/if}}
    <footer><a href="{{url}}">created {{created_at}}</a></footer>
  </article>
  {{/each}}
</script></code></pre>
      <aside class="notes">You'll notice this isn't a full expression like you might use in a regular if statement. You can only give if a value from the context object, and if that value evaluates falsy (false, undefined, null, 0, "", or []) then Handlebars won't render the block. In this case, since comments_count is an integer, we can rely on a zero-comments object not rendering this block.</aside>
      </section>
      <section>
        <h2>API Lab</h2>
        <p>Go back to the Star Wars API from earlier and let's put this all together.</p>
        <ul>
          <li>Create an HTML page. Add a link to get the list of films. Use jQuery AJAX and display just the list of film titles as links. Think about data attributes!</li>
          <li>When you click the link for a film, retrieve the film's planet and character data and display it on the page.</li>
          <li>BONUS: Use Handlebars to template your site.</li>
        </ul>
      </section>
      <section>
        <h2>Writing Data</h2>
        <p>So far we've just been performing GETs to read data from an API, but we often need to write data as well. Usually, this is done with a POST.</p>
        <pre class="fragment"><code>$.post( "test.php", { name: "John", time: "2pm" })
  .done(function( data ) {
    alert( "Data Loaded: " + data );
  });
  //easy enough but there's other concerns</code></pre>
      </section>
      <section>
        <h3>Authorization/Authentication</h3>
        <p>Most APIs will require some form of authentication to use write (and often, read) API endpoints. Common auth methods are:</p>
        <ul>
          <li class="fragment">HTTP Auth with Username/Password (less common, not great)</li>
          <li class="fragment">User-based API access token (OAuth/other)</li>
          <li class="fragment">Application-based API id/key pair</li>
          <li class="fragment">Combination!</li>
        </ul>
        <aside class="notes">Need user access to perform actions for a user, app access to perform general actions based on an application. Some operations will require both.</aside>
      </section>
      <section>
        <h4>Setting Up an API ID/Key Pair</h4>
        <p><small>An API key/id pair is just a way to identify an app and is not tied to your user login.</small></p>
        <ul>
          <li>Go to https://foursquare.com/developers/apps (sign in or register).</li>
          <li>Create new app. Use http://localhost for the APP URL.</li>
          <li>Copy and save CLIENT_ID and CLIENT_SECRET somewhere so we can use it.</li>
          <li>Make sure you know which is the ID and which is the secret!</li>
        </ul>
      </section>
      <section>
        <h4>Setting Up An OAuth Token</h4>
        <p><small>An OAuth token is tied to your user and is essentially a login.</small></p>
        <ul>
          <li>Log in to (or sign up for) Github.</li>
          <li>Go to https://github.com/settings/tokens and Generate New Token. Name it "Javascript Class" and check "repo" scope.</li>
          <li>Copy and past the token somewhere, because you won't see it again (this is a common security practice).</li>
        </ul>
        <aside class="notes">you can gen another if you lose it</aside>
      </section>
      <section>
        <h3>Authenticating to APIs</h3>
        <p>Let's check out authentication with an API call using the Foursquare API. Go to https://developer.foursquare.com/docs/ and let's try the venues endpoint.</p>
        <p class="fragment">Now let's try Github</p>
        <aside class="notes">
        <br>
github takes in header which we can't even do in a URL bar. Better way to explore.</aside>
      </section>
      <section>
        <h2>Exploring APIs with Postman</h2>
        <p>Postman is an app that makes interacting with APIs easy. https://www.getpostman.com/</p>
        <aside class="notes">Regular browse with github -> auth browse with params -> auth browse with oauth -> post with github</aside>
      </section>
      <section>
        <h2>AJAX With Auth</h2>
        <h4>GET</h4>
        <pre class="fragment"><code>let your_token = "YOUR TOKEN";
$.ajax( {
  url: 'https://api.github.com/user/repos',
  headers: {
    "authorization": `token ${your_token}`
  }
})
.done(function(data) {
  console.log(data);
})</code></pre>
      <aside class="notes">what's the `` construct?</aside>
      </section>
      <section>
        <h2>AJAX with Auth</h2>
        <h4>POST</h4>
        <pre class="fragment"><code>let your_token = "YOUR TOKEN";
$.ajax( {
  url: 'https://api.github.com/user/repos',
  method: 'POST',
  headers: {
    "authorization": `token ${your_token}`
  },
  data: '{"name": "scr-gh-post-test"}'
})
.done(function(data) {
  console.log(data);
})</code></pre>
      </section>
      <!-- PROMISES/ARROWS/FETCH -->
      <section>
        <h2>Promises, Promises</h2>
        <p><small>A Promise object represents a value that may not be available yet, but will be resolved at some point in the future. Essentially, the promise is an object that represents the result of an operation, whenever it occurs. This allows us to write more flexible asynchronous code than simply passing callback functions to asynchronous functions.</small></p>
        <ul>
          <li class="fragment">Eliminate "callback hell" and write clean code.</li>
          <li class="fragment">Decouple from event-driven structures.</li>
          <li class="fragment">Chain <em>thenable</em> statements for readable structure.</li>
        </ul>
      </section>
      <section>
        <h2>Promise Example</h2>
        <pre class="fragment"><code>order('Shack Burger')
  .then(function(order) { //order = returned val from order
    finishedOrder = order.prepare()
    return finishedOrder //pass this down the chain
  })
  .then(function(food) { //food = returned val from last then
    serve(food)
  })
  .catch(function(err) {
    console.log("oops")
  }) //where have we seen this pattern?</code></pre>
      <pre class="fragment"><code>$.get(uri)
  .done(function(data) {
    console.log("success!");
  })
  .fail(function(err) {
    console.log('oops!');
  })</code></pre>
      </section>
<!-- END PROMISES/ARROWS/FETCH -->
      <section>
        <h4>Easy Code Snippets with Postman</h4>
        <p>You can use Postman to generate your API access code for you!</p>
        <ul>
          <li>Set up an API call like normal</li>
          <li>Click "Code" and select language</li>
        </ul>
      </section>
      <section>
        <h2>AJAX Lab</h2>
        <ul>
        <li>Pick an API that interests you. Explore it. Create an HTML page that utilizes its functions. Use jQuery or fetch()</li>
        <li>Bonus: Use data from two or more APIs to create a mashup!</li>
        <small><p>Some APIs of interest: Twitter, Facebook, Foursquare, Darksky, IBM Watson, Github, Google, Meetup, Twilio, Spotify, News API, Battle.net, and a billion more.</p></small>
      </section>
    </div>
  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>

  <script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      history: true,
      center: false,

      // More info https://github.com/hakimel/reveal.js#dependencies
      dependencies: [{
          src: 'plugin/markdown/marked.js'
        },
        {
          src: 'plugin/markdown/markdown.js'
        },
        {
          src: 'plugin/notes/notes.js',
          async: true
        },
        {
          src: 'plugin/highlight/highlight.js',
          async: true,
          callback: function() {
            hljs.initHighlightingOnLoad();
          }
        }
      ]
    });
  </script>
</body>
</html>
